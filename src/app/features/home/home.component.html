@if (user$ | async; as user) {
  <div class="home-container">
    <header>
      <h2>Tableau de Bord - {{ user.displayName || 'Utilisateur' }}</h2>
      <button (click)="logout()" class="logout-btn">
        Déconnexion
      </button>
    </header>

    <section class="user-info">
      <img [src]="user.photoURL || 'placeholder.png'" alt="Photo de profil" class="profile-pic">
      <p>Bienvenue, **{{ user.displayName || user.email }}**.</p>
      <p>Votre ID de session est : `{{ user.uid }}`</p>
    </section>

    <hr>
    <main>
      <h3>Liste des Tâches Partagées</h3>

      <div class="add-task-container">
        <input
          type="text"
          [(ngModel)]="newName"
          placeholder="Nouvelle tâche domestique..."
          (keyup.enter)="addTask()"
        />
        <button (click)="addTask()">Ajouter</button>
      </div>

      @if (tasks$ | async; as tasks) {
        <div>
          @if (tasks.length > 0) {
            <ul>
              @for (task of tasks; track task.id) {
                <li [class.completed]="task.completed">
                  <input
                    type="checkbox"
                    [checked]="task.completed"
                    (change)="toggleTaskStatus(task)"
                    [id]="'task-' + task.id"
                  >
                  <label [for]="'task-' + task.id">{{ task.name }}</label>
                  @if (task.completed) {
                    <span>(Fini)</span>
                  }
                </li>
              }
            </ul>
          } @else {
            <p>Aucune tâche pour le moment.</p>
          }        </div>
      } @else {
        <p>Chargement des tâches...</p>
      }
    </main>
  </div>
} @else {
  <p>Chargement de la session utilisateur...</p>
}
